module src/lib/typechecker/types

import map
import src/lib/shared/commonTypes


type Type {
  IntType()
  BoolType()
  FunType(paramTypes: List[Type], returnType: Type)
  UnitType()
  StringType()
  DoubleType()
}

type TypingType {
  TInt()
  TBool()
  TUnit()
  TVar(id: Int)
  // generic type variable for polymorphic types
  TGen(id: Int)
  // variadic type for functions with variadic arguments
  TVariadic(inner: TypingType)
  TFun(params: List[TypingParam], ret: TypingType)
  TString()
  TDouble()
}

type TypeConstraint {
  MustBeNumeric(t: TypingType, pos: Position)
  MustBeAddable(t: TypingType, pos: Position) 
}

record TypeEquation(left: TypingType, right: TypingType, pos: Position)
record TypeBinding(tpe: TypingType, isMutable: Bool)
record TypingParam(tpe: TypingType, isOptional: Bool)

type Substitution = Map[Int, TypingType]